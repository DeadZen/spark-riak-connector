<!--
  Copyright 2015 Basho Technologies Inc
-->
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
  <id>REPL</id>

  <formats>
    <format>zip</format>
  </formats>

  <dependencySets>

    <!-- put all binary prerequisites to /lib -->
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <includes>
        <include>com.basho:spark-riak-connector</include>
        <include>com.basho:spark-riak-connector-java</include>
        <include>com.basho:spark-riak-connector-test</include>
        <include>com.google.guava:guava</include>
        <include>com.basho.riak:riak-client</include>
        <include>com.basho.riak.protobuf:riak-pb</include>
        <include>com.fasterxml.jackson.module:jackson-module-scala_${scala.major.version}</include>
        <include>org.scala-lang.modules:scala-java8-compat_${scala.major.version}</include>
      </includes>
    </dependencySet>

    <!-- put all binary demos & prerequisites to /demos-jar -->
    <dependencySet>
      <outputDirectory>demos-jar</outputDirectory>
      <includes>
        <include>com.basho:spark-riak-connector-demos</include>
      </includes>
    </dependencySet>
  </dependencySets>

  <fileSets>
    <!-- put helper script to / -->
    <fileSet>
      <directory>src/main/repl</directory>
      <outputDirectory>./</outputDirectory>
      <includes>
        <include>*</include>
      </includes>
      <excludes>
        <exclude>spark-repl-assembly.xml</exclude>
      </excludes>
    </fileSet>

    <!-- put all demos to /demos -->
    <fileSet>
      <directory>src/main/scala/com/basho/spark/connector/demos</directory>
      <outputDirectory>demos</outputDirectory>
      <includes>
        <include>*.scala</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>src/main/python</directory>
      <outputDirectory>demos/python</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>src/main/resources</directory>
      <outputDirectory>demos/data</outputDirectory>
    </fileSet>
  </fileSets>
</assembly>
